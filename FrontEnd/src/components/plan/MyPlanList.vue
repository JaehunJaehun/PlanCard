<template>
    <div style="margin-top: 6rem; display: flex; flex-direction: column; gap: 3rem;">
        <div class="background-image">
            <div class="first-text-content">
                <div style="font-size: 1.6rem;">
                    <div>친구, 연인, 가족, 나와 함께 쓰는 여행 플래너</div>
                </div>
                <div style="font-size: 5rem;">플랜카드</div>
                <div style="font-size: 1.2rem;">플랜카드로 모두 함께 즐거운 여행을 만들어요.</div>
                <button style="background-color: #262626; color: #fff; width: 13rem; height: 4rem; border-radius: 5px;">바로 시작하기</button>
            </div>
        </div>
        <div class="background-image">
            <div class="img-content">
                <img src="/question-two-color.png" alt="">
            </div>
            <div class="text-content">
                <div style="position: relative;">
                    <div class="bubble">잠깐만, 방금 전에 어디 말했더라?</div>
                </div>
                <div class="main">기억이 나지 않을 땐,</div>
                <div><span>STT</span>를 통해 말했던 장소를 바로 카드로 만들어줘요.</div>
            </div>
        </div>
        <div class="background-image" id="second">
            <div class="img-content-1">
                <img src="/loading-two-color.png" alt="">
            </div>
            <div class="text-content-1">
                <div>
                    <div class="bubble">정리한 계획 보내줄게, 기다려봐. </div>
                    <div class="bubble">(1시간뒤)</div>
                    <div class="bubble">언제 줘?</div>
                </div>
                <div class="main">기다리기 싫을 땐,</div>
                <div><span>공동편집</span>으로 여행계획을 곧바로 공유할 수 있어요.</div>
            </div>
        </div>
        <div class="background-image">
            <div class="img-content">
                <img src="/manager-two-color.png" alt="">
            </div>
            <div class="text-content">
                <div class="bubble">예약 마감까지 10분 남았는데 다들 왜 답장이 없어? ㅠㅠ</div>
                <div class="main">바로 결정해야할 땐,</div>
                <div><span>WebRTC</span>를 통해 실시간 화상통화로 모두 함께 계획을 짤 수 있어요.</div>
            </div>  
        </div>
        <div class="background-image last-background">
            <div class="last-text-content">
                    <!-- Generator: Adobe Illustrator 27.9.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
                    <div class="logo-anim">
                        <svg version="1.1" id="레이어_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
                        y="0px" viewBox="0 0 383.4 368.83" style="enable-background:new 0 0 383.4 368.83; position: absolute; top: 0px; left: 0px;" xml:space="preserve">
                        <path id="P" class="st0" d="M115.03,134.84c0,0,9.98,1.78,19.92-1.75c9.93-3.52,10.43-10.06,10.43-10.06
                        c-0.08-0.24,1.79-9.89-5.83-14.44c-8.42-5.04-17.73-2.42-22.34-0.51c-1.79,0.74-2.94,2.5-2.94,4.44v41.12"/>
                        <path id="L" class="st1" d="M160.29,104.56l8.85,0.81c0.81,0.07,1.43,0.75,1.43,1.56v45.21"/>
                        <path id="A-1" class="st1" d="M226.22,151.17l-10.01-20.72c0,0-4.56-8.53-15.04-6.45c-10.49,2.08-11.99,10.43-11.38,16.13
                        c0.51,4.75,4.45,10.63,12.38,10.29c8.18-0.35,16.21-9.04,14.99-17.74"/>
                        <path id="N" class="st1" d="M269.86,151.17v-18.81c0,0-2.5-9.13-12.29-7.68c0,0-7.17,0.8-12.29,7.51l-3.18-10.02
                        c0,0,1.9,3.38,2.92,8.48c0.06,0.77,0.16,2.02,0.22,2.79l-0.68,18.11"/>
                        <path id="C" class="st1" d="M133.12,217.29c0,0-16.47-11.47-28.59,2.94c-0.6,0.72-1.09,1.52-1.5,2.36
                        c-2.16,4.43-7.46,18.3,2.89,31.5c1.22,1.55,2.83,2.75,4.63,3.55c4.87,2.15,15.01,4.97,23.71-3.44"/>
                        <path id="A-2" class="st1" d="M191.7,260.78l-10.01-20.72c0,0-4.56-8.53-15.04-6.45c-10.49,2.08-11.99,10.43-11.38,16.13
                        c0.51,4.75,4.45,10.63,12.38,10.29c8.18-0.35,16.21-9.04,14.99-17.74"/>
                        <path id="R" class="st1" d="M231.61,238.8c0,0-13.86-6.11-19.11,8.24l-0.08,17.24c0.51-28.95-1.7-34.47-1.7-34.47"/>
                        <path id="D" class="st1" d="M282.81,212.39l0.85,37.87c0,0,0.34,11.19-13.75,10.52c-14.09-0.67-15.28-11.54-15.28-11.54
                        s-2.46-10.83,9.85-14.43c19.19-3.57,19.19,15.45,19.19,15.45"/>
                        </svg>
                        <img src="/logo_background.png" style="padding-left: 1rem; width: 100%; height: 100%;" alt="">
                    </div>
                <div style="text-align: center; margin-top: 1rem; font-size: 2rem; width: 300px;">
                    <div>다같이 쓰는 플랜카드,</div>
                    <div>한번 시작해볼까요? </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script setup>
function checkVisible( element, check = 'above' ) {
    const viewportHeight = screen.height; // Viewport Height
    const scrolltop = screen.scrollTop; // Scroll Top
    const y = element.offset().top;
    const elementHeight = element.height();   
    
    // 반드시 요소가 화면에 보여야 할경우
    if (check == "visible") 
      return ((y < (viewportHeight + scrolltop)) && (y > (scrolltop - elementHeight)));
        
    // 화면에 안보여도 요소가 위에만 있으면 (페이지를 로드할때 스크롤이 밑으로 내려가 요소를 지나쳐 버릴경우)
    if (check == "above") 
      return ((y < (viewportHeight + scrolltop)));
}

// 리소스가 로드 되면 함수 실행을 멈출지 말지 정하는 변수
let isVisible = false;

// 이벤트에 등록할 함수
const func = function () {
    if ( !isVisible && checkVisible('#second') ) {
        alert("엘리먼트 보임 !!");
        
        isVisible = true;
    }
    
    // 만일 리소스가 로드가 되면 더이상 이벤트 스크립트가 있을 필요가 없으니 삭제
    isVisible && window.removeEventListener('scroll', func);
}

// 스크롤 이벤트 등록
window.addEventListener('scroll', func);
</script>

<style scoped>
.bubble{
padding-top: 8px;
padding-bottom: 3px;
padding-left: 10px;
padding-right: 10px;    
background-color: #3498DB;
border-radius: 5px;
width: fit-content;
z-index: 2;
}
.bubble::before{
    content:'';
    position: absolute;
    width: 0px;
    bottom: 0px;
    left: -15px;
    border-bottom: 8px solid #3498DB;
    border-top: 8px solid transparent;
    border-right: 10px solid #3498DB;
    border-left: 10px solid transparent;
    position: absolute;
    z-index: 1;
}
.mine .message-content {
    background-color: #3498DB;
    color: #fff;
    z-index: 2;
    }
.mine .message-content::after {
    content: '';
    position: absolute;
    width: 0px;
    right: -6px;
    top: 0px;
    border-bottom: 6px solid transparent;
    border-top: 6px solid #3498DB;
    border-right: 6px solid transparent;
    border-left: 6px solid #3498DB;
    position: absolute;
    z-index: 1;
}
.background-image{
    background-color: #fff; 
    width: 100vw; 
    height: 80vh;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
}
.first-text-content{
    position: absolute;
    top: 30%;
    left: 20%;
}
/* .text-content{
    position: absolute;
    top: 40%;
    left: 20%;
}
.text-content-1{
    position: absolute;
    top: 30%;
    right: 20%;
}
.img-content{
    position: absolute;
    top: 20%;
    right: 20%;
}
.img-content-1{
    position: absolute;
    top: 20%;
    left: 20%;
} */
button{
    margin-top: 20px;
}
.main{
    font-size: 3.4rem;
}
img{
    width: 400px;
    height: auto;
}

.last-background{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
.last-background>.last-text-content{
    position: relative;
    width: 250px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}


    #P{stroke-dasharray: 620; stroke-dashoffset: -620;animation: P-anim 2s linear .0s forwards;}
 
    @keyframes P-anim {
        from {stroke-dashoffset : -620px;}
        to {stroke-dashoffset : 0px;}
    }
    #L{stroke-dasharray: 620; stroke-dashoffset: -620;animation: L-anim 2s cubic-bezier(0.1, 0.2, 0.2, 1) .0s forwards;}
 
    @keyframes L-anim {
        from {stroke-dashoffset : -620px;}
        to {stroke-dashoffset : 0px;}
    }
    #A-1{stroke-dasharray: 620; stroke-dashoffset: -620;animation: P-anim 2s cubic-bezier(0.1, 0.2, 0.2, 1) .0s forwards;}
 
    @keyframes A-1-anim {
        from {stroke-dashoffset : -620px;}
        to {stroke-dashoffset : 0px;}
    }
    #N{stroke-dasharray: 620; stroke-dashoffset: -620;animation: P-anim 2s cubic-bezier(0.1, 0.2, 0.2, 1) .0s forwards;}
 
    @keyframes N-anim {
        from {stroke-dashoffset : -620px;}
        to {stroke-dashoffset : 0px;}
    }
    #C{stroke-dasharray: 620; stroke-dashoffset: -620;animation: P-anim 2s cubic-bezier(0.1, 0.2, 0.2, 1) .0s forwards;}
 
    @keyframes C-anim {
        from {stroke-dashoffset : -620px;}
        to {stroke-dashoffset : 0px;}
    }
    #A-2{stroke-dasharray: 620; stroke-dashoffset: -620;animation: P-anim 2s cubic-bezier(0.1, 0.2, 0.2, 1) .0s forwards;}
 
    @keyframes A-2-anim {
        from {stroke-dashoffset : -620px;}
        to {stroke-dashoffset : 0px;}
    }
    #R{stroke-dasharray: 620; stroke-dashoffset: -620;animation: P-anim 2s cubic-bezier(0.1, 0.2, 0.2, 1) .0s forwards;}
 
    @keyframes R-anim {
        from {stroke-dashoffset : -620px;}
        to {stroke-dashoffset : 0px;}
    }
    #D{stroke-dasharray: 620; stroke-dashoffset: -620;animation: D-anim 2s cubic-bezier(0.1, 0.1, 0.1, 1) .0s forwards;}
 
    @keyframes D-anim {
        from {stroke-dashoffset : -620px;}
        to {stroke-dashoffset : 0px;}
    }
    
    .st0{fill:none;stroke:#FFFFFF;stroke-width:12;stroke-linecap:round;stroke-miterlimit:10;}
    .st1{fill:none;stroke:#FFFFFF;stroke-width:12;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
</style>